const e=async()=>{let e;try{e=await fetch("https://67a7982f203008941f680c6c.mockapi.io/products/products").then(e=>e.json())}catch(t){e=t}return e},t=document.querySelector(".products-list"),c=e=>{let c=e.map(e=>`<li class="product-item" id="${e.id}">
            <p class="product-name">${e.name}</p>
            <p class="product-price">${e.price}</p>
            <p class="product-sort">${e.description}</p>
            <img src="${e.image}" class="product-img"></img>
            <button class="delete-btn" type="button">delete</button>
            <button class="edit-btn" type="button">edit</button>
        </li>`).join("");t.innerHTML=c},o=async e=>{try{return await fetch(`https://67a7982f203008941f680c6c.mockapi.io/products/products/${e}`,{method:"DELETE"})}catch(e){console.log(e.message)}},n=async(e,t)=>{console.log(e,t);try{return await fetch(`https://67a7982f203008941f680c6c.mockapi.io/products/products/${t}`,{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>e.json())}catch(e){console.log(e.message)}},r=()=>{let t;document.querySelectorAll(".edit-btn").forEach(e=>{e.addEventListener("click",e=>{let c=e.target.parentElement;t=c.id,document.querySelector(".edit-modal").classList.remove("is-hidden"),document.querySelector("#name-input").value=c.querySelector(".product-name").textContent,document.querySelector("#price-input").value=c.querySelector(".product-price").textContent,document.querySelector("#description-input").value=c.querySelector(".product-sort").textContent,document.querySelector("#img-input").value=c.querySelector(".product-img").src})});let o=document.querySelector(".edit-form__info"),i=document.querySelector(".edit-modal");o.addEventListener("submit",async s=>{s.preventDefault(),i.classList.add("is-hidden");let d={name:o.elements.name.value,price:o.elements.price.value,description:o.elements.description.value,img:o.elements.img.value};await n(d,t),c(await e()),a(),r()}),document.querySelector(".close-edit-modal").addEventListener("click",()=>{document.querySelector(".edit-modal").classList.add("is-hidden")})},a=()=>{document.querySelectorAll(".delete-btn").forEach(t=>{t.addEventListener("click",async()=>{let n=t.parentElement.id;try{await o(n);let t=await e();c(t),a(),r()}catch(e){console.error("Error while deleting the product:",e),alert("Не вдалося видалити продукт. Спробуйте ще раз.")}})})};e().then(e=>{c(e),a(),r()});const i=document.querySelector(".open-modal"),s=document.querySelector(".close-modal"),d=document.querySelector(".modal");document.querySelector("body"),i.addEventListener("click",e=>{e.preventDefault(),d.classList.remove("is-hidden")}),s.addEventListener("click",e=>{e.preventDefault(),d.classList.add("is-hidden")});const l=async e=>{try{return await fetch("https://67a7982f203008941f680c6c.mockapi.io/products/products",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>e.json())}catch(e){console.log(e)}},u=document.querySelector(".form-info"),m=document.querySelector(".modal");u.addEventListener("submit",async t=>{t.preventDefault(),m.classList.add("is-hidden");let o={name:u.elements.name.value,price:u.elements.price.value,description:u.elements.description.value,img:u.elements.img.value};await l(o),c(await e()),a(),r()});
//# sourceMappingURL=index.865ce3b3.js.map
